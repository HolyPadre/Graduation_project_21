<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Planner</title>
    
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">    <!----===== Iconscout CSS ===== -->

    <link rel="stylesheet" href="/Planner/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/Planner/assets/bootstrap/css/index.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/Planner/pages/customerPage/main.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/Planner/assets/fonts/font-awesome.min.css">
</head>

<body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="72">
    <nav class="navbar navbar-light navbar-expand-lg fixed-top bg-secondary text-uppercase" id="mainNav">
        <div class="container"><a class="navbar-brand" href="#page-top"> <span style="color: #20c997;">P</span>lanner Customer</a><button data-bs-toggle="collapse" data-bs-target="#navbarResponsive" class="navbar-toggler text-white bg-primary navbar-toggler-right text-uppercase rounded" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><i class="fa fa-bars"></i></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link px-0 px-lg-3 rounded" href="">Home</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link  px-0 px-lg-3 rounded" href="">Vendors</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link  px-0 px-lg-3 rounded" href="\Planner\pages\customerPage\myEvent.html">My Events</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link  px-0 px-lg-3 rounded" href="" onclick="logoutfunction()"><i class="fas fa-sign-out-alt">Log Out</i></a></li>

                </ul>
            </div>
        </div>
    </nav>
    <header class="text-center text-white bg-primary masthead" id="head">
        <div class="container"><img class="img-fluid d-block mx-auto mb-5" src="/Planner/assets/img/event.png" alt="">
            <h3>What are you waiting for !</h3>
            <h4>Make your event now !</h4>
            <hr class="star-light">
            <a type="button" class="btn" style="background-color: #2C3E50; font-weight: bolder; font-size: larger;" href="" data-bs-toggle="modal" data-bs-target="#exampleModal1" >Make Event</a>
        </div>
    </header>

                    <!-- Modal -->
<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="exampleModalLabel" style="font-weight: 900; color: black;">Event Details</h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="container">
                <div class="row">
                  <form class="row g-3">
                    <div class="col-md-6">
                      <label for="inputName4" class="form-label">Event Name *</label>
                      <input type="text" class="form-control" id="inputName4">
                    </div>
                    <div class="col-md-6">
                      <label for="inputDate" class="form-label">Date *</label>
                      <input type="date" class="form-control" id="inputDate">
                    </div>
                    <div class="col-md-6">
                      <label for="inputType" class="form-label">Type *</label>
                      <select class="form-select" aria-label="Default" id="typetext">
                        <option value="26">Wedding</option>
                        <option value="32">Meeting</option>
                        <option value="2">Concerts</option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <label for="inputType" class="form-label">Location *</label>
                      <select class="form-select" aria-label="Default" id="locationcity">
                        <option value="1">Jerusalem</option>
                        <option value="2">Ramallah</option>
                        <option value="3">Jericho</option>
                        <option value="4">Nablus</option>
                        <option value="5">Jenin</option>
                        <option value="6">Tulkarem</option>
                        <option value="7">Qalquilia</option>
                        <option value="8">Salfit</option>
                        <option value="9">Hebron</option>
                      
                      </select>
                    </div>
                  </form>
               </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary"  data-bs-dismiss="modal" onclick="MakeEvent()">Go</button>
        </div>
      </div>
    </div>
  </div>
</div>




<footer class="text-center footer">
  <div class="container">
      <div class="row">
          <div class="col-md-4 mb-5 mb-lg-0">
              <h4 class="text-uppercase mb-4">Location</h4>
              <p>2215 Palestine Ramallah<br>Birzeit, MO 65243</p>
          </div>
          <div class="col-md-4 mb-5 mb-lg-0">
              <h4 class="text-uppercase">Find Us On</h4>
              <ul class="list-inline">
                  <li class="list-inline-item"><a class="btn btn-outline-light text-center btn-social rounded-circle" role="button" href="#"><i class="fa fa-facebook fa-fw"></i></a></li>
                  <li class="list-inline-item"><a class="btn btn-outline-light text-center btn-social rounded-circle" role="button" href="#"><i class="fa fa-linkedin fa-fw"></i></a></li>
                  <li class="list-inline-item"><a class="btn btn-outline-light text-center btn-social rounded-circle" role="button" href="#"><i class="fa fa-twitter fa-fw"></i></a></li>
                  <li class="list-inline-item"><a class="btn btn-outline-light text-center btn-social rounded-circle" role="button" href="#"><i class="fa fa-github fa-fw"></i></a></li>
              </ul>
          </div>
          <div class="col-md-4">
              <h4 class="text-uppercase mb-4">About Planner</h4>
              <p class="lead mb-0"><span>Planner created by pairing together our passion for business and events.&nbsp;</span></p>
          </div>
      </div>
  </div>
</footer>
<div class="text-center text-white copyright py-4">
  <div class="container"><small>Copyright Â©&nbsp;Planner 2022</small></div>
</div>
    <script src="/Planner/assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="/Planner/pages/customerPage/js.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</body>
<script>
  function getCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
      var c = ca[i];
      while (c.charAt(0)==' ') c = c.substring(1,c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
      }
  return null;
  }
</script>
<script>
  window.onload = (event) => {
      $.ajax({

          type: 'POST',
          url: 'http://127.0.0.1:8086/api/login',
          crossDomain: true,
          dataType: 'json',
          data: {
              "username": getCookie("username_user"),
              "password": getCookie("password_user")
          },
          success: function (data) {
               if(data.is_customer == true){
                   console.log(data.is_customer)
                   setCookie("user_id",data.user_id,1);
               }else if(data.is_vendor == true){
                window.location.replace("/Planner/pages/vendorPage/vendorDashboard.html");
               }else if(data.is_customer == false && data.is_vendor == false  ){
                window.location.replace("/Planner/pages/adminPage/adminDashboard.html");
               }
          },
          error: function (data) {
            window.location.replace("/Planner/pages/loginRegisterPages/login.html");
          }
      })
};
</script>
<script>
  function MakeEvent(){
    sel = document.getElementById("typetext")
      sel2 = document.getElementById("locationcity")
      var eventname = document.getElementById("inputName4").value;
      var datetext = document.getElementById("inputDate").value;
      var typename = sel.options[sel.selectedIndex].text;
      var locationname = sel2.options[sel2.selectedIndex].text;


      $.ajax({

            type: 'POST',
            url: 'http://127.0.0.1:8086/event/create',
            crossDomain: true,
            dataType: 'json',
            data: {
              "name": eventname,
              "type": typename,
              "location": locationname,
              "Date": datetext,
              "user": getCookie("user_id"),

            },
            success: function (data) {
                alert(data.id);
                setCookie("event_id",data.id,"2");
                setCookie("data_event",datetext,2);
                window.location.href = "/Planner/pages/customerPage/venues.html?eventname="+eventname+"&datetext="+datetext+"&type="+sel.value+"&location="+sel2.options[sel2.selectedIndex].text;
            },
            error: function (data) {
                console.log(data);
            }
            })
      
  };
</script>
<script>
  function setCookie(name,value,days) {
  var expires = "";
  if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days*24*60*60*1000));
      expires = "; expires=" + date.toUTCString();
      }
  document.cookie = name + "=" + (value || "")  + expires + "; path=/";
  }
</script>
<script>
  function logoutfunction(){
  setCookie("username_user","",1);
  setCookie("password_user","",1);
  window.location.replace("/Planner/pages/loginRegisterPages/login.html");
  }

</script>
</html>